DJANGO CMS SETTINGS.PY REFERENCE
=================================

DOCUMENTATION LINKS
-------------------

Django CMS Official Documentation:
- Main docs: https://docs.django-cms.org/
- Installation guide: https://docs.django-cms.org/en/latest/introduction/install.html
- Required apps: https://docs.django-cms.org/en/latest/how_to/install.html#required-apps
- Settings reference: https://docs.django-cms.org/en/latest/reference/configuration.html

Related Package Documentation:
- Sekizai (template blocks): https://django-sekizai.readthedocs.io/
- Treebeard (page hierarchy): https://django-treebeard.readthedocs.io/
- Django Sites Framework: https://docs.djangoproject.com/en/stable/ref/contrib/sites/

Django Core Documentation:
- Settings overview: https://docs.djangoproject.com/en/5.2/topics/settings/
- Database configuration: https://docs.djangoproject.com/en/5.2/ref/settings/#databases


SETTINGS.PY ELEMENTS EXPLAINED
===============================

BASE_DIR
--------
Purpose: Defines the root directory of your Django project
Usage: Used to construct absolute paths for templates, static files, media, and database
CMS Relation: Critical for locating CMS templates and static assets

SECRET_KEY
----------
Purpose: Cryptographic key for security features (sessions, cookies, CSRF)
Usage: Must be kept secret in production; randomly generated during project creation
CMS Relation: Required for CMS toolbar authentication and secure page editing

DEBUG
-----
Purpose: Enables detailed error pages and debug information
Usage: Set to True for development, False for production
CMS Relation: When True, shows detailed CMS errors; when False, shows user-friendly error pages

ALLOWED_HOSTS
-------------
Purpose: List of domain names that this Django site can serve
Usage: Empty list for development; must include your domain in production
CMS Relation: Required for CMS to work properly in production; prevents HTTP Host header attacks


INSTALLED_APPS
--------------
Purpose: Lists all Django applications that are activated in this project
CMS Relation: Critical for CMS functionality; order matters!

'djangocms_admin_style'
  - Provides styled admin interface for Django CMS
  - Must come BEFORE 'django.contrib.admin'
  - Gives the admin panel a modern, CMS-friendly appearance

'django.contrib.admin'
  - Django's built-in admin interface
  - Used by CMS for page management and content editing

'django.contrib.auth'
  - Django's authentication system
  - CMS uses this for user permissions and access control

'django.contrib.contenttypes'
  - Framework for generic relations between models
  - CMS uses this for plugins and page relationships

'django.contrib.sessions'
  - Session framework for tracking user state
  - CMS toolbar relies on sessions to maintain editing state

'django.contrib.messages'
  - Framework for temporary messages (success, error notifications)
  - CMS uses this to provide feedback when creating/editing pages

'django.contrib.staticfiles'
  - Manages static files (CSS, JavaScript, images)
  - Serves CMS admin styles and toolbar JavaScript

'django.contrib.sites'
  - Manages multiple sites from one Django installation
  - REQUIRED by Django CMS; CMS pages are associated with specific sites

'cms'
  - Core Django CMS application
  - Provides page management, placeholders, and content editing

'menus'
  - Django CMS menu system
  - Generates navigation automatically from page structure
  - Used by {% show_menu %} template tag

'treebeard'
  - Tree structure library
  - Powers the hierarchical page structure in CMS (parent/child pages)
  - Enables drag-and-drop page organization

'sekizai'
  - Template block manager
  - Allows plugins and templates to inject CSS/JS into page head/footer
  - Used by {% render_block "css" %} and {% render_block "js" %} tags

'access_django_user_admin'
  - Custom app for your ACCESS CI project
  - Project-specific user administration

'djangocmsjoy'
  - Your main application
  - Contains your custom templates, views, and models


MIDDLEWARE
----------
Purpose: Components that process requests/responses globally
CMS Relation: Django CMS requires specific middleware for proper operation; order matters!

'django.middleware.security.SecurityMiddleware'
  - Provides security enhancements
  - Standard Django middleware

'django.contrib.sessions.middleware.SessionMiddleware'
  - Enables session support
  - Required for CMS toolbar to maintain editing state

'django.middleware.common.CommonMiddleware'
  - Common Django functionality (URL normalization, etc.)
  - Standard middleware

'django.middleware.csrf.CsrfViewMiddleware'
  - CSRF protection for forms
  - Protects CMS forms from cross-site request forgery

'django.contrib.auth.middleware.AuthenticationMiddleware'
  - Associates users with requests
  - Required for CMS to identify logged-in editors

'django.contrib.messages.middleware.MessageMiddleware'
  - Enables messages framework
  - CMS uses this for user notifications

'django.middleware.clickjacking.XFrameOptionsMiddleware'
  - Protects against clickjacking attacks
  - Standard security middleware

'django.middleware.locale.LocaleMiddleware'
  - Enables language selection based on request
  - Required for multilingual CMS sites

'cms.middleware.user.CurrentUserMiddleware'
  - Makes current user available to CMS
  - Required for CMS permission system

'cms.middleware.page.CurrentPageMiddleware'
  - Tracks the current CMS page being viewed
  - Required for CMS page rendering

'cms.middleware.toolbar.ToolbarMiddleware'
  - Renders the CMS editing toolbar
  - Enables frontend editing functionality

'cms.middleware.language.LanguageCookieMiddleware'
  - Manages language preferences
  - Required for multilingual CMS functionality


TEMPLATES
---------
Purpose: Configuration for Django's template system
CMS Relation: CMS templates must be properly configured

'DIRS': [BASE_DIR / 'templates']
  - Tells Django where to look for templates
  - Your CMS page templates (page.html, feature.html) live here

'APP_DIRS': True
  - Allows Django to look for templates in app directories
  - Enables CMS to find its own admin templates

Context Processors:
  'django.template.context_processors.request'
    - Makes request object available in templates
    - Required by CMS toolbar

  'django.contrib.auth.context_processors.auth'
    - Adds user and permissions to template context
    - Used by CMS for permission checks

  'django.template.context_processors.i18n'
    - Adds internationalization variables
    - Required for multilingual CMS

  'django.template.context_processors.media'
    - Adds MEDIA_URL to context
    - Used for CMS uploaded images

  'django.template.context_processors.csrf'
    - Adds CSRF token
    - Required for CMS forms

  'sekizai.context_processors.sekizai'
    - Enables Sekizai template blocks
    - Required for {% render_block %} tags

  'cms.context_processors.cms_settings'
    - Adds CMS settings to template context
    - Makes CMS configuration available in templates


DATABASES
---------
Purpose: Database connection configuration
CMS Relation: Stores all CMS pages, content, and structure

'ENGINE': 'django.db.backends.postgresql'
  - Database backend being used
  - PostgreSQL recommended for production CMS

'NAME': 'djangocmsjoy'
  - Name of the database
  - Contains all CMS tables (cms_page, cms_placeholder, etc.)

'USER', 'PASSWORD', 'HOST', 'PORT'
  - Connection credentials
  - Required for connecting to PostgreSQL


INTERNATIONALIZATION
--------------------

LANGUAGE_CODE = 'en'
  - Default language for the site
  - CMS uses this as fallback language

LANGUAGES = [('en', 'English')]
  - List of available languages
  - CMS can create translated versions of pages

TIME_ZONE = 'UTC'
  - Timezone for date/time storage
  - Used for CMS publish dates

USE_I18N = True
  - Enables Django's internationalization system
  - Required for multilingual CMS

USE_TZ = True
  - Enables timezone-aware datetimes
  - Recommended for CMS

SITE_ID = 1
  - ID of the current site in django.contrib.sites
  - REQUIRED by Django CMS; pages are associated with this site


DJANGO CMS SPECIFIC SETTINGS
-----------------------------

CMS_CONFIRM_VERSION4 = True
  - Confirms you understand you're using CMS 4/5
  - Required setting to prevent migration errors

CMS_TEMPLATES = [...]
  - Defines available page templates
  - Each tuple is (template_file, human_readable_name)
  - When creating pages, you choose from these templates
  - Templates must exist in your TEMPLATES['DIRS']

CMS_PERMISSION = False
  - Enables granular page permissions
  - When False: simpler permission model (staff can edit all pages)
  - When True: complex per-page permission system

CMS_PLACEHOLDER_CONF = {}
  - Configuration for placeholders (editable regions)
  - Can define plugins allowed, plugin limits, etc.
  - Empty dict means default settings for all placeholders

X_FRAME_OPTIONS = 'SAMEORIGIN'
  - Controls if site can be embedded in iframes
  - Required for CMS frontend editing to work
  - Allows toolbar to function properly


STATIC FILES
------------

STATIC_URL = '/static/'
  - URL prefix for static files
  - CMS admin CSS/JS served from here

STATIC_ROOT = BASE_DIR / 'staticfiles'
  - Where collectstatic copies all static files
  - For production deployment

STATICFILES_DIRS = [BASE_DIR / 'static']
  - Additional locations for static files
  - Your custom CSS (style-serviceindex.css) lives here

MEDIA_URL = '/media/'
  - URL prefix for user-uploaded files
  - CMS image uploads accessible here

MEDIA_ROOT = BASE_DIR / 'media'
  - Filesystem location for uploaded files
  - CMS stores uploaded images here


CRITICAL RELATIONSHIPS FOR DJANGO CMS
======================================

1. Page Structure:
   - Sites framework (SITE_ID) → CMS pages belong to sites
   - Treebeard → Manages page hierarchy
   - CMS_TEMPLATES → Defines what templates pages can use

2. Content Editing:
   - Auth + Sessions → User authentication for editing
   - CMS Middleware → Toolbar and page tracking
   - Placeholders → Editable regions defined in templates

3. Navigation:
   - Menus app → Generates navigation from page tree
   - {% show_menu %} tag → Renders navigation in templates

4. Frontend Display:
   - Templates with {% placeholder %} tags → Editable regions
   - Sekizai → Manages CSS/JS injection
   - Static files → Serves admin interface and custom styles

5. Data Storage:
   - PostgreSQL database → All pages, content, structure
   - Media folder → User-uploaded images
   - Static folder → CSS, JavaScript, fonts


COMMON GOTCHAS
==============

1. App Order Matters:
   - djangocms_admin_style must come BEFORE django.contrib.admin
   - Django CMS won't work without django.contrib.sites

2. Middleware Order Matters:
   - CMS middleware must come after auth and session middleware
   - Language middleware should come early

3. Required Settings:
   - SITE_ID must be set
   - CMS_CONFIRM_VERSION4 must be True
   - X_FRAME_OPTIONS must allow SAMEORIGIN

4. Templates:
   - Must load {% load cms_tags menu_tags sekizai_tags %}
   - Must include {% cms_toolbar %} for editing
   - Must include {% render_block %} for CSS/JS
